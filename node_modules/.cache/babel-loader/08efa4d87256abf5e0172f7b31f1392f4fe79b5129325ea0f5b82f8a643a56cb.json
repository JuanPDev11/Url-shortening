{"ast":null,"code":"import _regeneratorRuntime from\"/home/lucumi/Escritorio/react/Url-shortening/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/lucumi/Escritorio/react/Url-shortening/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/lucumi/Escritorio/react/Url-shortening/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var linksContainer=[];var getLocalStorage=function getLocalStorage(){var links=localStorage.getItem(\"links\");if(links){return JSON.parse(localStorage.getItem(\"links\"));}else{return[];}};export default function Form(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(getLocalStorage()),_useState4=_slicedToArray(_useState3,2),links=_useState4[0],setLinks=_useState4[1];var _useState5=useState('copy'),_useState6=_slicedToArray(_useState5,2),buttonText=_useState6[0],setButtonText=_useState6[1];var handleSubmit=function handleSubmit(e){var handleCopy=function handleCopy(){navigator.clipboard.writeText(links.full_short_link);setButtonText(\"Copied!\");};e.preventDefault();var dataKey=Date.now();linksContainer.push(/*#__PURE__*/_jsxs(\"div\",{className:\"form_table\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"form_table_paragraph\",children:links.full_short_link}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCopy,className:\"form_table_button\",children:buttonText})]},dataKey));if(!text){alert(\"Input is empty\");}else{var shortenLink=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.shrtco.de/v2/shorten?url=\".concat(text));case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;setLinks(data.result);setText(\"\");case 8:case\"end\":return _context.stop();}},_callee);}));return function shortenLink(){return _ref.apply(this,arguments);};}();shortenLink();}};useEffect(function(){localStorage.setItem(\"links\",JSON.stringify(links));},[links]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"links_container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_container\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form_imput_text\",type:\"url\",placeholder:\"     Shorten a link here...\",value:text,onChange:function onChange(e){return setText(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{id:\"error\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form_imput_submit\",type:\"submit\",value:\"Shorten It!\",onClick:handleSubmit})]}),/*#__PURE__*/_jsx(\"div\",{children:linksContainer})]})})});}","map":{"version":3,"names":["useEffect","useState","linksContainer","getLocalStorage","links","localStorage","getItem","JSON","parse","Form","text","setText","setLinks","buttonText","setButtonText","handleSubmit","e","handleCopy","navigator","clipboard","writeText","full_short_link","preventDefault","dataKey","Date","now","push","alert","shortenLink","fetch","res","json","data","result","setItem","stringify","target","value"],"sources":["/home/lucumi/Escritorio/react/Url-shortening/src/components/form.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\n\nconst linksContainer = [];\nconst getLocalStorage = () => {\n  const links = localStorage.getItem(\"links\");\n  if (links) {\n    return JSON.parse(localStorage.getItem(\"links\"))\n  } else {\n    return []\n  }\n  \n}\n\n\n\n\nexport default function Form () {\n  const [text, setText] = useState(\"\");\n  const [links, setLinks] = useState(getLocalStorage());\n  const [buttonText, setButtonText] = useState('copy');\n  \n\n    const handleSubmit = (e) => {\n\n      const handleCopy = () => {\n    navigator.clipboard.writeText(links.full_short_link);\n    setButtonText(\"Copied!\");\n  }\n      \n    e.preventDefault()\n    const dataKey = Date.now();\n    linksContainer.push(<div className=\"form_table\" key={dataKey} >\n                          <p className=\"form_table_paragraph\">{links.full_short_link}</p>\n                          <button onClick={handleCopy} className=\"form_table_button\">\n                          {buttonText}\n                          </button>\n                        </div>)\n\n    \n\n    if (!text) {\n      alert(\"Input is empty\");\n    } else {\n      const shortenLink = async () => {\n        const res = await fetch(`https://api.shrtco.de/v2/shorten?url=${text}`);\n        const data = await res.json();\n        setLinks(data.result);\n        setText(\"\");\n      }\n\n      shortenLink();\n    }\n  }\n\n  \n\n  useEffect(() => {\n    localStorage.setItem(\"links\", JSON.stringify(links))\n  }, [links]);\n  \n\n  return (\n    <>\n      <div className=\"links_container\">\n      <div className=\"form\"> \n        <div className=\"form_container\" onSubmit={handleSubmit}>\n          <input className=\"form_imput_text\" type=\"url\" placeholder=\"     Shorten a link here...\" value={text} onChange={(e) => setText(e.target.value)}/>\n          <div id=\"error\"></div>\n          <input className=\"form_imput_submit\" type=\"submit\" value=\"Shorten It!\" onClick={handleSubmit}/> \n        </div>\n        <div>\n          {linksContainer}\n        </div>\n      </div>\n      </div>\n    </>\n      \n  )\n}"],"mappings":"sZAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,6IAG5C,GAAMC,eAAc,CAAG,EAAE,CACzB,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,EAAS,CAC5B,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACT,MAAOG,KAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAClD,CAAC,IAAM,CACL,MAAO,EAAE,CACX,CAEF,CAAC,CAKD,cAAe,SAASG,KAAI,EAAI,CAC9B,cAAwBR,QAAQ,CAAC,EAAE,CAAC,wCAA7BS,IAAI,eAAEC,OAAO,eACpB,eAA0BV,QAAQ,CAACE,eAAe,EAAE,CAAC,yCAA9CC,KAAK,eAAEQ,QAAQ,eACtB,eAAoCX,QAAQ,CAAC,MAAM,CAAC,yCAA7CY,UAAU,eAAEC,aAAa,eAG9B,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAE1B,GAAMC,WAAU,CAAG,QAAbA,WAAU,EAAS,CAC3BC,SAAS,CAACC,SAAS,CAACC,SAAS,CAAChB,KAAK,CAACiB,eAAe,CAAC,CACpDP,aAAa,CAAC,SAAS,CAAC,CAC1B,CAAC,CAECE,CAAC,CAACM,cAAc,EAAE,CAClB,GAAMC,QAAO,CAAGC,IAAI,CAACC,GAAG,EAAE,CAC1BvB,cAAc,CAACwB,IAAI,cAAC,aAAK,SAAS,CAAC,YAAY,wBACzB,UAAG,SAAS,CAAC,sBAAsB,UAAEtB,KAAK,CAACiB,eAAe,EAAK,cAC/D,eAAQ,OAAO,CAAEJ,UAAW,CAAC,SAAS,CAAC,mBAAmB,UACzDJ,UAAU,EACF,GAJsBU,OAAO,CAKlC,CAAC,CAI3B,GAAI,CAACb,IAAI,CAAE,CACTiB,KAAK,CAAC,gBAAgB,CAAC,CACzB,CAAC,IAAM,CACL,GAAMC,YAAW,4FAAG,uKACAC,MAAK,gDAAyCnB,IAAI,EAAG,QAAjEoB,GAAG,qCACUA,IAAG,CAACC,IAAI,EAAE,QAAvBC,IAAI,eACVpB,QAAQ,CAACoB,IAAI,CAACC,MAAM,CAAC,CACrBtB,OAAO,CAAC,EAAE,CAAC,CAAC,qDACb,kBALKiB,YAAW,0CAKhB,CAEDA,WAAW,EAAE,CACf,CACF,CAAC,CAID5B,SAAS,CAAC,UAAM,CACdK,YAAY,CAAC6B,OAAO,CAAC,OAAO,CAAE3B,IAAI,CAAC4B,SAAS,CAAC/B,KAAK,CAAC,CAAC,CACtD,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAGX,mBACE,sCACE,YAAK,SAAS,CAAC,iBAAiB,uBAChC,aAAK,SAAS,CAAC,MAAM,wBACnB,aAAK,SAAS,CAAC,gBAAgB,CAAC,QAAQ,CAAEW,YAAa,wBACrD,cAAO,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,6BAA6B,CAAC,KAAK,CAAEL,IAAK,CAAC,QAAQ,CAAE,kBAACM,CAAC,QAAKL,QAAO,CAACK,CAAC,CAACoB,MAAM,CAACC,KAAK,CAAC,EAAC,EAAE,cAChJ,YAAK,EAAE,CAAC,OAAO,EAAO,cACtB,cAAO,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAEtB,YAAa,EAAE,GAC3F,cACN,qBACGb,cAAc,EACX,GACF,EACA,EACL,CAGP"},"metadata":{},"sourceType":"module","externalDependencies":[]}